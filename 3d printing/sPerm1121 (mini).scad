// Based from Florent Hivert's code

$fn=20;

module convex_poly(l) {
     hull() { for (point=l) translate (point) cube(0.0001); }
};

module cylinder_ep(p1, p2, r1, r2) {
    
     translate(p1) sphere(r=r1, center=true);
     translate(p2) sphere(r=r2, center=true);
     vector = [p2[0] - p1[0], p2[1] - p1[1], p2[2] - p1[2]];
     distance = sqrt(pow(vector[0], 2) +
		     pow(vector[1], 2) +
		     pow(vector[2], 2));
     translate(vector/2 + p1)
	  rotate([0, 0, atan2(vector[1], vector[0])])
	  rotate([0, atan2(sqrt(pow(vector[0], 2) +
                                pow(vector[1], 2)), vector[2]), 0])
	  cylinder(h = distance, r1 = r1, r2 = r2, center=true);
}

// List of edges for a small version of the 1121-permutahedron
sPerm1121 = [[[0.471000000000000, 1.47000000000000, 4.02000000000000],
  [0.471000000000000, 1.80000000000000, 3.69000000000000],
  1],
 [[0.471000000000000, 1.47000000000000, 4.02000000000000],
  [1.07100000000000, 0.870000000000000, 4.02000000000000],
  1],
 [[0.471000000000000, 1.47000000000000, 4.02000000000000],
  [0.471000000000000, 1.47000000000000, 4.62000000000000],
  1],
 [[0.471000000000000, 1.80000000000000, 3.69000000000000],
  [0.570000000000000, 1.80000000000000, 3.59100000000000],
  1],
 [[0.471000000000000, 1.80000000000000, 3.69000000000000],
  [0.471000000000000, 2.67000000000000, 2.82000000000000],
  1],
 [[0.471000000000000, 1.80000000000000, 3.69000000000000],
  [0.471000000000000, 1.80000000000000, 4.47000000000000],
  1],
 [[0.570000000000000, 1.80000000000000, 3.59100000000000],
  [0.570000000000000, 2.67000000000000, 2.72100000000000],
  1],
 [[0.570000000000000, 1.80000000000000, 3.59100000000000],
  [1.17000000000000, 1.20000000000000, 3.59100000000000],
  1],
 [[0.570000000000000, 1.80000000000000, 3.59100000000000],
  [0.570000000000000, 1.80000000000000, 4.42500000000000],
  1],
 [[0.471000000000000, 2.67000000000000, 2.82000000000000],
  [0.471000000000000, 2.85000000000000, 2.82000000000000],
  1],
 [[0.471000000000000, 2.67000000000000, 2.82000000000000],
  [0.570000000000000, 2.67000000000000, 2.72100000000000],
  1],
 [[0.471000000000000, 2.85000000000000, 2.82000000000000],
  [0.570000000000000, 2.85000000000000, 2.72100000000000],
  1],
 [[0.471000000000000, 2.85000000000000, 2.82000000000000],
  [0.471000000000000, 2.85000000000000, 3.42000000000000],
  1],
 [[0.570000000000000, 2.67000000000000, 2.72100000000000],
  [0.570000000000000, 2.85000000000000, 2.72100000000000],
  1],
 [[0.570000000000000, 2.67000000000000, 2.72100000000000],
  [0.831000000000000, 2.67000000000000, 2.46000000000000],
  1],
 [[0.570000000000000, 2.85000000000000, 2.72100000000000],
  [0.831000000000000, 2.85000000000000, 2.46000000000000],
  1],
 [[0.570000000000000, 2.85000000000000, 2.72100000000000],
  [0.570000000000000, 2.85000000000000, 3.37500000000000],
  1],
 [[0.831000000000000, 2.67000000000000, 2.46000000000000],
  [0.831000000000000, 2.85000000000000, 2.46000000000000],
  1],
 [[0.831000000000000, 2.67000000000000, 2.46000000000000],
  [1.43100000000000, 2.07000000000000, 2.46000000000000],
  1],
 [[0.831000000000000, 2.85000000000000, 2.46000000000000],
  [0.885000000000001, 2.85000000000000, 2.46000000000000],
  1],
 [[0.885000000000001, 2.85000000000000, 2.46000000000000],
  [1.48500000000000, 2.25000000000000, 2.46000000000000],
  1],
 [[0.885000000000001, 2.85000000000000, 2.46000000000000],
  [0.885000000000001, 2.85000000000000, 3.06000000000000],
  1],
 [[1.07100000000000, 0.870000000000000, 4.02000000000000],
  [1.17000000000000, 0.870000000000000, 3.92100000000000],
  1],
 [[1.07100000000000, 0.870000000000000, 4.02000000000000],
  [1.07100000000000, 0.870000000000000, 4.62000000000000],
  1],
 [[1.17000000000000, 0.870000000000000, 3.92100000000000],
  [1.17000000000000, 1.20000000000000, 3.59100000000000],
  1],
 [[1.17000000000000, 0.870000000000000, 3.92100000000000],
  [1.43100000000000, 0.870000000000000, 3.66000000000000],
  1],
 [[1.17000000000000, 0.870000000000000, 3.92100000000000],
  [1.17000000000000, 0.870000000000000, 4.57500000000000],
  1],
 [[1.17000000000000, 1.20000000000000, 3.59100000000000],
  [1.43100000000000, 1.20000000000000, 3.33000000000000],
  1],
 [[1.17000000000000, 1.20000000000000, 3.59100000000000],
  [1.17000000000000, 1.20000000000000, 4.42500000000000],
  1],
 [[1.43100000000000, 0.870000000000000, 3.66000000000000],
  [1.48500000000000, 0.870000000000000, 3.66000000000000],
  1],
 [[1.43100000000000, 0.870000000000000, 3.66000000000000],
  [1.43100000000000, 1.20000000000000, 3.33000000000000],
  1],
 [[1.48500000000000, 0.870000000000000, 3.66000000000000],
  [1.48500000000000, 1.20000000000000, 3.33000000000000],
  1],
 [[1.48500000000000, 0.870000000000000, 3.66000000000000],
  [1.48500000000000, 0.870000000000000, 4.26000000000000],
  1],
 [[1.43100000000000, 1.20000000000000, 3.33000000000000],
  [1.43100000000000, 2.07000000000000, 2.46000000000000],
  1],
 [[1.43100000000000, 1.20000000000000, 3.33000000000000],
  [1.48500000000000, 1.20000000000000, 3.33000000000000],
  1],
 [[1.43100000000000, 2.07000000000000, 2.46000000000000],
  [1.48500000000000, 2.07000000000000, 2.46000000000000],
  1],
 [[1.48500000000000, 1.20000000000000, 3.33000000000000],
  [1.48500000000000, 2.07000000000000, 2.46000000000000],
  1],
 [[1.48500000000000, 1.20000000000000, 3.33000000000000],
  [1.48500000000000, 1.20000000000000, 4.11000000000000],
  1],
 [[1.48500000000000, 2.07000000000000, 2.46000000000000],
  [1.48500000000000, 2.25000000000000, 2.46000000000000],
  1],
 [[1.48500000000000, 2.25000000000000, 2.46000000000000],
  [1.48500000000000, 2.25000000000000, 3.06000000000000],
  1],
 [[0.471000000000000, 1.47000000000000, 4.62000000000000],
  [1.07100000000000, 0.870000000000000, 4.62000000000000],
  1],
 [[0.471000000000000, 1.47000000000000, 4.62000000000000],
  [0.471000000000000, 1.65000000000000, 4.62000000000000],
  1],
 [[1.07100000000000, 0.870000000000000, 4.62000000000000],
  [1.12500000000000, 0.870000000000000, 4.62000000000000],
  1],
 [[1.12500000000000, 0.870000000000000, 4.62000000000000],
  [1.17000000000000, 0.870000000000000, 4.57500000000000],
  1],
 [[1.12500000000000, 0.870000000000000, 4.62000000000000],
  [1.12500000000000, 1.05000000000000, 4.62000000000000],
  1],
 [[1.17000000000000, 0.870000000000000, 4.57500000000000],
  [1.48500000000000, 0.870000000000000, 4.26000000000000],
  1],
 [[1.17000000000000, 0.870000000000000, 4.57500000000000],
  [1.17000000000000, 1.05000000000000, 4.57500000000000],
  1],
 [[1.48500000000000, 0.870000000000000, 4.26000000000000],
  [1.48500000000000, 1.05000000000000, 4.26000000000000],
  1],
 [[0.471000000000000, 1.65000000000000, 4.62000000000000],
  [0.471000000000000, 1.80000000000000, 4.47000000000000],
  1],
 [[0.471000000000000, 1.65000000000000, 4.62000000000000],
  [0.525000000000000, 1.65000000000000, 4.62000000000000],
  1],
 [[0.471000000000000, 1.80000000000000, 4.47000000000000],
  [0.471000000000000, 2.85000000000000, 3.42000000000000],
  1],
 [[0.471000000000000, 1.80000000000000, 4.47000000000000],
  [0.525000000000000, 1.80000000000000, 4.47000000000000],
  1],
 [[0.471000000000000, 2.85000000000000, 3.42000000000000],
  [0.525000000000000, 2.85000000000000, 3.42000000000000],
  1],
 [[0.525000000000000, 1.65000000000000, 4.62000000000000],
  [1.12500000000000, 1.05000000000000, 4.62000000000000],
  1],
 [[0.525000000000000, 1.65000000000000, 4.62000000000000],
  [0.525000000000000, 1.80000000000000, 4.47000000000000],
  1],
 [[1.12500000000000, 1.05000000000000, 4.62000000000000],
  [1.17000000000000, 1.05000000000000, 4.57500000000000],
  1],
 [[1.17000000000000, 1.05000000000000, 4.57500000000000],
  [1.48500000000000, 1.05000000000000, 4.26000000000000],
  1],
 [[1.17000000000000, 1.05000000000000, 4.57500000000000],
  [1.17000000000000, 1.20000000000000, 4.42500000000000],
  1],
 [[1.48500000000000, 1.05000000000000, 4.26000000000000],
  [1.48500000000000, 1.20000000000000, 4.11000000000000],
  1],
 [[0.525000000000000, 1.80000000000000, 4.47000000000000],
  [0.570000000000000, 1.80000000000000, 4.42500000000000],
  1],
 [[0.525000000000000, 1.80000000000000, 4.47000000000000],
  [0.525000000000000, 2.85000000000000, 3.42000000000000],
  1],
 [[0.570000000000000, 1.80000000000000, 4.42500000000000],
  [1.17000000000000, 1.20000000000000, 4.42500000000000],
  1],
 [[0.570000000000000, 1.80000000000000, 4.42500000000000],
  [0.570000000000000, 2.85000000000000, 3.37500000000000],
  1],
 [[1.17000000000000, 1.20000000000000, 4.42500000000000],
  [1.48500000000000, 1.20000000000000, 4.11000000000000],
  1],
 [[1.48500000000000, 1.20000000000000, 4.11000000000000],
  [1.48500000000000, 2.25000000000000, 3.06000000000000],
  1],
 [[0.525000000000000, 2.85000000000000, 3.42000000000000],
  [0.570000000000000, 2.85000000000000, 3.37500000000000],
  1],
 [[0.570000000000000, 2.85000000000000, 3.37500000000000],
  [0.885000000000001, 2.85000000000000, 3.06000000000000],
  1],
 [[0.885000000000001, 2.85000000000000, 3.06000000000000],
  [1.48500000000000, 2.25000000000000, 3.06000000000000],
  1]];


colormat = [[0,0,0], [1,0,0], [0,1,0], [0,0,1], [1,1,0], [1,0,1], [0,1,1]];

module plotter(graph, scale, rayon) {
    for (edge=graph) {
        color (colormat[edge[2]])
            cylinder_ep(edge[0]*scale, edge[1]*scale, rayon, rayon);
    }
}

plotter(sPerm1121,45,0.8);